<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>EasyWeb后台开发框架</title>
    <script type="text/javascript" src="/kbs/assets/libs/echarts/echarts.js"></script>
    <script type="text/javascript" src="/kbs/assets/libs/echarts/customed.js"></script>
</head>

<body>

<div id="hdqkyc" style="height: 400px"></div>

<script>
    window.onload = function () {
        // 渲染活动情况预测
        // var myCharts = ;

        // 外部引入
        var data = {
            title: ['111','12-01', '12-02', '12-03', '12-04', '12-05', '12-06', '12-07', '12-08', '12-09'],
            plan_production: [490,300, 490, 333, 346, 777, 888, 864, 789, 765],
            actual_production: [490,400, 500, 300, 400, 500, 300, 400, 500, 500]
        };

        for (var pr in data) {
            data[pr] = data[pr].slice(0, 20);
        }

        function getTableLine(num) {
            var list = [];
            var bottom = 122;
            var height = 20;
            for (var i = 0; i < num; i++) {
                list.push({
                    type: 'line',
                    bottom: bottom - i * height,
                    right: 80,
                    style: {
                        fill: '#333'
                    },
                    shape: {
                        x1: 0,
                        y1: 0,
                        x2: 3200,
                        y2: 0
                    }

                });
            }
            return list;
        }

        var lineList = getTableLine(3);


        var option = {
            title: [{
                text: '计划数量\n实际产出\n',
                top: 280,
                left: 10,
                textStyle: {
                    lineHeight: 20,
                    fontSize: 13,
                    fontWeight: 'normal',
                    formatter: function (value) {
                        return '{table|' + value + '}';
                    },
                    rich: {
                        table: {
                            align: 'center'
                        }
                    }
                }
            }],
            tooltip: {
                trigger: 'axis',
                axisPointer: {
                    type: 'cross',
                    label: {
                        backgroundColor: '#283b56'
                    }
                }
            },
            legend: {
                data: ['计划数量', '实际产出']
            },
            grid: {
                bottom: 147,
                left: 80,
                right: 80
            },
            xAxis: [{
                type: 'category',
                boundaryGap: true,
                data: data.title,
                axisTick: {
                    length: 64
                }
                ,
                axisLabel: {
                    formatter: function (value, index) {
                        var indexNum = 0;
                        /*      for (var i = 0; i < data.title.length; i++) {
                                  if (value == data.title[i]) {
                                      indexNum = i;
                                  }
                              }*/
                        return '{table|' + value + '}\n'+'{table|' + data.plan_production[index] + '}\n' + data.actual_production[index];
                        // return value;
                        // return value +'\n'+'\n'+ data.plan_production[index] +'\n'+'\n'+ data.actual_production[index]
                    },
                    rich: {
                        table: {
                            lineHeight: 20,
                            align: 'center'
                        }
                    }
                }
            }],
            yAxis: [{
                type: 'value',
                scale: true,
                minInterval: 1,
                name: '数量',
                splitLine: {
                    show: false
                },
                min: function (v) {
                    return Math.max((v.min - 10), 0);
                }
            }],
            series: [{
                name: '计划数量',
                type: 'bar',
                label: {
                    show: true,
                    position: 'top'
                },
                yAxisIndex: 0,
                data: data.plan_production
            }, {
                name: '实际产出',
                type: 'bar',
                label: {
                    show: true,
                    position: 'top'
                },
                yAxisIndex: 0,
                data: data.actual_production
            }],
            graphic: lineList
        };
        echarts.init(document.getElementById('hdqkyc'), 'customed').setOption(option);
    }
</script>

</body>

</html>